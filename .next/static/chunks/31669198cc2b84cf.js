(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,31713,e=>{"use strict";var t=e.i(43476),s=e.i(71645),r=e.i(18566),a=e.i(91432),n=e.i(75254);let l=(0,n.default)("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]),d=(0,n.default)("MicOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]),i=(0,n.default)("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]),c=(0,n.default)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);function o({isListening:e,setIsListening:s}){let{user:n,logout:o}=(0,a.useAuth)(),m=(0,r.useRouter)();return(0,t.jsx)("header",{className:"border-b border-border sticky top-0 z-40 bg-background/80 backdrop-blur-sm",children:(0,t.jsx)("div",{className:"max-w-7xl mx-auto px-4 lg:px-6 py-4",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(i,{className:"w-6 h-6 text-primary animate-pulse"}),(0,t.jsx)("span",{className:"text-xl font-bold text-primary tracking-wider",children:"KALI"})]}),(0,t.jsx)("div",{className:"h-6 w-px bg-border/50"}),(0,t.jsxs)("span",{className:"text-xs text-muted-foreground font-mono",children:[n?.name||"SYSTEM"," | v2.4"]})]}),(0,t.jsx)("div",{className:"hidden md:flex items-center gap-6",children:(0,t.jsxs)("div",{className:"text-right text-xs space-y-1",children:[(0,t.jsx)("div",{className:"text-foreground font-mono font-semibold",children:"SYSTEM STATUS"}),(0,t.jsx)("div",{className:"text-primary",children:"ONLINE | SECURE"})]})}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("button",{onClick:()=>{s(!e)},className:`p-2 rounded border transition-all duration-300 font-mono text-xs font-semibold tracking-wide ${e?"bg-primary/20 border-primary text-primary shadow-lg shadow-primary/50":"bg-muted border-border hover:border-primary/50 hover:text-primary text-muted-foreground"}`,children:(0,t.jsx)("div",{className:"flex items-center gap-2",children:e?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(l,{className:"w-4 h-4"}),(0,t.jsx)("span",{children:"LISTENING"})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(d,{className:"w-4 h-4"}),(0,t.jsx)("span",{children:"ACTIVATE"})]})})}),(0,t.jsx)("button",{onClick:()=>{o(),m.push("/login")},className:"p-2 rounded border bg-muted border-border hover:border-destructive/50 hover:text-destructive text-muted-foreground transition-all duration-300 font-mono text-xs font-semibold",title:"Logout",children:(0,t.jsx)(c,{className:"w-4 h-4"})})]})]})})})}let m={cyan:{text:"text-primary",bg:"bg-primary/10",bar:"bg-primary"},green:{text:"text-accent",bg:"bg-accent/10",bar:"bg-accent"},blue:{text:"text-blue-400",bg:"bg-blue-400/10",bar:"bg-blue-400"},orange:{text:"text-yellow-500",bg:"bg-yellow-500/10",bar:"bg-yellow-500"},red:{text:"text-destructive",bg:"bg-destructive/10",bar:"bg-destructive"}};function x({label:e,value:s,unit:r,status:a,color:n}){let l=m[n],d=(e.includes("TEMP"),100),i=((e,t)=>{if(e.includes("TEMP")){if(t>80)return"critical";if(t>70)return"warning"}else if(e.includes("CPU")){if(t>85)return"critical";if(t>75)return"warning"}else if(e.includes("GPU")){if(t>80)return"critical";if(t>70)return"warning"}else if(e.includes("MEMORY")){if(t>85)return"critical";if(t>75)return"warning"}return"active"})(e,s);return(0,t.jsx)("div",{className:"glow-card p-4 border rounded-sm",children:(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-xs font-mono text-muted-foreground font-semibold tracking-wider",children:e}),(0,t.jsxs)("div",{className:`text-3xl font-bold font-mono mt-1 ${l.text}`,children:[s,(0,t.jsx)("span",{className:"text-lg ml-1 opacity-70",children:r})]})]}),(0,t.jsx)("div",{className:`w-2 h-2 rounded-full ${l.bg} border ${l.text} border-opacity-50`})]}),(0,t.jsx)("div",{className:"w-full h-1.5 bg-muted rounded-sm overflow-hidden border border-border/50",children:(0,t.jsx)("div",{className:`h-full ${l.bar} transition-all duration-500`,style:{width:`${s/d*100}%`}})}),(0,t.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Status:"}),(0,t.jsx)("span",{className:`font-mono font-semibold uppercase tracking-wide ${l.text}`,children:i})]})]})})}function u({systemData:e}){return(0,t.jsxs)("div",{className:"glow-card border p-6 rounded-sm space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-lg font-bold text-primary font-mono tracking-wider",children:"PERFORMANCE METRICS"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Real-time system analysis"})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("div",{className:"text-2xl font-mono font-bold text-primary",children:e.time}),(0,t.jsx)("div",{className:"text-xs text-muted-foreground",children:"Current Time"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("div",{className:"text-xs font-mono text-muted-foreground uppercase tracking-wider font-semibold",children:"CPU Load"}),(0,t.jsxs)("div",{className:"text-3xl font-bold font-mono text-primary",children:[e.cpu,"%"]}),(0,t.jsx)("div",{className:"w-full h-1 bg-muted rounded-full overflow-hidden",children:(0,t.jsx)("div",{className:"h-full bg-primary transition-all duration-500",style:{width:`${e.cpu}%`}})})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("div",{className:"text-xs font-mono text-muted-foreground uppercase tracking-wider font-semibold",children:"GPU Load"}),(0,t.jsxs)("div",{className:"text-3xl font-bold font-mono text-accent",children:[e.gpu,"%"]}),(0,t.jsx)("div",{className:"w-full h-1 bg-muted rounded-full overflow-hidden",children:(0,t.jsx)("div",{className:"h-full bg-accent transition-all duration-500",style:{width:`${e.gpu}%`}})})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("div",{className:"text-xs font-mono text-muted-foreground uppercase tracking-wider font-semibold",children:"RAM Usage"}),(0,t.jsxs)("div",{className:"text-3xl font-bold font-mono text-blue-400",children:[e.ram,"%"]}),(0,t.jsx)("div",{className:"w-full h-1 bg-muted rounded-full overflow-hidden",children:(0,t.jsx)("div",{className:"h-full bg-blue-400 transition-all duration-500",style:{width:`${e.ram}%`}})})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("div",{className:"text-xs font-mono text-muted-foreground uppercase tracking-wider font-semibold",children:"Memory"}),(0,t.jsxs)("div",{className:"text-3xl font-bold font-mono text-yellow-500",children:[e.memory,"%"]}),(0,t.jsx)("div",{className:"w-full h-1 bg-muted rounded-full overflow-hidden",children:(0,t.jsx)("div",{className:"h-full bg-yellow-500 transition-all duration-500",style:{width:`${e.memory}%`}})})]})]}),(0,t.jsx)("div",{className:"border-t border-border/50 pt-4",children:(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-xs font-mono text-muted-foreground uppercase tracking-wider font-semibold mb-2",children:"Network Upload"}),(0,t.jsxs)("div",{className:"text-2xl font-bold font-mono text-primary",children:[e.networkUp," MB/s"]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-xs font-mono text-muted-foreground uppercase tracking-wider font-semibold mb-2",children:"Network Download"}),(0,t.jsxs)("div",{className:"text-2xl font-bold font-mono text-accent",children:[e.networkDown," MB/s"]})]})]})})]})}function h({systemData:e}){return(0,t.jsxs)("div",{className:"glow-card border p-6 rounded-sm",children:[(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)("h2",{className:"text-lg font-bold text-primary font-mono tracking-wider",children:"SYSTEM DIAGNOSTICS"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Real-time performance analysis"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)("div",{className:"text-xs font-mono text-muted-foreground uppercase tracking-wider",children:"CPU Analysis"}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex items-baseline justify-between",children:[(0,t.jsx)("span",{className:"text-sm",children:"Core Usage"}),(0,t.jsxs)("span",{className:"text-primary font-mono font-bold",children:[e.cpu,"%"]})]}),(0,t.jsx)("div",{className:"w-full h-1 bg-muted rounded-full overflow-hidden",children:(0,t.jsx)("div",{className:"h-full bg-primary w-3/4"})})]}),(0,t.jsx)("div",{className:"text-xs text-muted-foreground pt-2",children:"8/16 Cores Active"})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)("div",{className:"text-xs font-mono text-muted-foreground uppercase tracking-wider",children:"GPU Analysis"}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex items-baseline justify-between",children:[(0,t.jsx)("span",{className:"text-sm",children:"GPU Load"}),(0,t.jsxs)("span",{className:"text-accent font-mono font-bold",children:[e.gpu,"%"]})]}),(0,t.jsx)("div",{className:"w-full h-1 bg-muted rounded-full overflow-hidden",children:(0,t.jsx)("div",{className:"h-full bg-accent",style:{width:`${e.gpu}%`}})})]}),(0,t.jsx)("div",{className:"text-xs text-muted-foreground pt-2",children:"NVIDIA RTX 4090"})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)("div",{className:"text-xs font-mono text-muted-foreground uppercase tracking-wider",children:"Thermal"}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex items-baseline justify-between",children:[(0,t.jsx)("span",{className:"text-sm",children:"Temp"}),(0,t.jsxs)("span",{className:`font-mono font-bold ${e.temp>75?"text-destructive":"text-accent"}`,children:[e.temp,"Â°C"]})]}),(0,t.jsx)("div",{className:"w-full h-1 bg-muted rounded-full overflow-hidden",children:(0,t.jsx)("div",{className:`h-full ${e.temp>75?"bg-destructive":"bg-accent"}`,style:{width:`${e.temp/100*100}%`}})})]}),(0,t.jsx)("div",{className:"text-xs text-muted-foreground pt-2",children:e.temp>75?"âš ï¸ High":"âœ“ Optimal"})]})]})]})}let p=(0,n.default)("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]);function g({isListening:e,systemData:r}){let[a,n]=(0,s.useState)(""),[d,i]=(0,s.useState)("Ready to receive commands..."),[c,o]=(0,s.useState)([]),[m,x]=(0,s.useState)(!1),[u,h]=(0,s.useState)(!1),g=(0,s.useRef)(null),f=(0,s.useRef)(null);(0,s.useEffect)(()=>{if(!e){g.current&&g.current.stop();return}let t=window.SpeechRecognition||window.webkitSpeechRecognition;if(!t)return void i("Speech Recognition API not available in this browser");let s=new t;s.continuous=!1,s.interimResults=!0,s.lang="en-US",s.onstart=()=>{n(""),i("LISTENING FOR COMMANDS...")},s.onresult=e=>{let t="";for(let s=e.resultIndex;s<e.results.length;s++)t+=e.results[s][0].transcript+" ";if(n(t.trim()),e.results[e.results.length-1].isFinal){let e=t.trim();e&&b(e)}},s.onerror=e=>{i(`ERROR: ${e.error?e.error.toUpperCase():"Unknown error"}`)},s.onend=()=>{if(e)try{s.start()}catch(e){console.log("[v0] Recognition already started")}},g.current=s;try{s.start()}catch(e){console.log("[v0] Recognition start error:",e)}return()=>{try{s.stop()}catch(e){console.log("[v0] Recognition stop error:",e)}}},[e]);let b=async e=>{h(!0),i("PROCESSING THROUGH SECURITY PROTOCOLS...");try{let t=(await fetch("/api/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:`User command in cybersecurity interface: "${e}". Current system stats: CPU ${r.cpu}%, GPU ${r.gpu}%, RAM ${r.ram}%, Temp ${r.temp}\xb0C, Network Up ${r.networkUp} Mbps, Down ${r.networkDown} Mbps. User coordinates: ${r.coordinates.lat.toFixed(2)}\xb0N, ${r.coordinates.lon.toFixed(2)}\xb0E. Respond as KALI AI assistant.`})}).then(e=>e.json())).response||"Command acknowledged";i(t),o(t=>[{time:new Date().toLocaleTimeString(),command:e},...t.slice(0,9)]),v(t)}catch(e){console.log("[v0] Processing error:",e),i("ERROR: Unable to process command"),h(!1)}},v=e=>{try{window.speechSynthesis.cancel();let t=new SpeechSynthesisUtterance(e);t.rate=1,t.pitch=1,t.volume=1,t.lang="en-US";let s=window.speechSynthesis.getVoices();s.length>0&&(t.voice=s.find(e=>e.name.includes("Google UK English Male"))||s.find(e=>!e.name.includes("Female"))||s[0]),t.onstart=()=>{x(!0),console.log("[v0] Speech synthesis started for:",e.substring(0,50))},t.onend=()=>{x(!1),h(!1),console.log("[v0] Speech synthesis completed")},t.onerror=e=>{console.log("[v0] Speech synthesis error:",e.error),x(!1),h(!1)},f.current=t,window.speechSynthesis.speak(t)}catch(e){console.log("[v0] Voice synthesis error:",e),h(!1)}};return(0,t.jsxs)("div",{className:"glow-card border border-border/50 p-6 rounded-sm bg-background/40 backdrop-blur",children:[(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,t.jsx)(p,{className:"w-5 h-5 text-primary animate-pulse"}),(0,t.jsx)("h2",{className:"text-lg font-bold text-primary font-mono tracking-widest",children:"VOICE COMMAND CENTER"}),(m||u)&&(0,t.jsxs)("div",{className:"flex gap-1",children:[(0,t.jsx)("div",{className:"w-2 h-2 rounded-full bg-accent animate-pulse"}),(0,t.jsx)("div",{className:"w-2 h-2 rounded-full bg-accent animate-pulse",style:{animationDelay:"0.2s"}}),(0,t.jsx)("div",{className:"w-2 h-2 rounded-full bg-accent animate-pulse",style:{animationDelay:"0.4s"}})]})]}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground font-mono",children:"AI Assistant Communication Protocol"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"border border-border/50 bg-muted/20 p-4 rounded-sm min-h-24 backdrop-blur-sm",children:[(0,t.jsxs)("div",{className:"text-xs font-mono text-muted-foreground uppercase tracking-wider font-semibold mb-2 flex items-center gap-2",children:[(0,t.jsx)(l,{className:"w-3 h-3"}),"INPUT STREAM"]}),(0,t.jsx)("p",{className:`font-mono text-sm leading-relaxed ${a?"text-primary":"text-muted-foreground"}`,children:a||"Awaiting voice input..."})]}),(0,t.jsxs)("div",{className:"border border-border/50 bg-muted/20 p-4 rounded-sm min-h-24 backdrop-blur-sm",children:[(0,t.jsx)("div",{className:"text-xs font-mono text-muted-foreground uppercase tracking-wider font-semibold mb-2",children:"OUTPUT STREAM"}),(0,t.jsxs)("p",{className:"font-mono text-sm leading-relaxed text-accent",children:[d,u&&(0,t.jsx)("span",{className:"animate-pulse",children:"â–ˆ"})]})]})]}),(0,t.jsxs)("div",{className:"border border-border/50 bg-muted/20 p-4 rounded-sm backdrop-blur-sm",children:[(0,t.jsx)("div",{className:"text-xs font-mono text-muted-foreground uppercase tracking-wider font-semibold mb-3",children:"Command History"}),(0,t.jsx)("div",{className:"space-y-2 max-h-56 overflow-y-auto scrollbar-thin scrollbar-track-transparent scrollbar-thumb-primary/20",children:0===c.length?(0,t.jsxs)("p",{className:"text-muted-foreground text-xs font-mono",children:[">"," No commands processed yet"]}):c.map((e,s)=>(0,t.jsxs)("div",{className:"text-xs border-l border-primary/20 pl-3 py-1",children:[(0,t.jsxs)("div",{className:"text-primary/70 font-mono",children:["[",e.time,"]"]}),(0,t.jsx)("div",{className:"text-foreground font-mono text-primary",children:e.command})]},s))})]})]})]})}function f({systemData:e}){return(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"glow-card border p-4 rounded-sm",children:[(0,t.jsx)("div",{className:"text-xs font-mono text-muted-foreground uppercase tracking-wider font-semibold mb-3",children:"System Temperature"}),(0,t.jsx)("div",{className:"text-3xl font-bold font-mono mb-2",children:(0,t.jsxs)("span",{className:e.temp>75?"text-destructive":"text-accent",children:[e.temp,"Â°C"]})}),(0,t.jsx)("div",{className:"w-full h-1 bg-muted rounded-full overflow-hidden",children:(0,t.jsx)("div",{className:`h-full transition-all duration-500 ${e.temp>75?"bg-destructive":"bg-accent"}`,style:{width:`${e.temp/100*100}%`}})}),(0,t.jsxs)("div",{className:"text-xs text-muted-foreground mt-2",children:["Status: ",e.temp>75?"âš ï¸ WARNING":"âœ“ NORMAL"]})]}),(0,t.jsxs)("div",{className:"glow-card border p-4 rounded-sm",children:[(0,t.jsx)("div",{className:"text-xs font-mono text-muted-foreground uppercase tracking-wider font-semibold mb-3",children:"Coordinates"}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsxs)("div",{className:"font-mono text-sm",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"LAT: "}),(0,t.jsxs)("span",{className:"text-primary",children:[e.coordinates.lat.toFixed(4),"Â°"]})]}),(0,t.jsxs)("div",{className:"font-mono text-sm",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"LON: "}),(0,t.jsxs)("span",{className:"text-accent",children:[e.coordinates.lon.toFixed(4),"Â°"]})]})]})]}),(0,t.jsxs)("div",{className:"glow-card border p-4 rounded-sm",children:[(0,t.jsx)("div",{className:"text-xs font-mono text-muted-foreground uppercase tracking-wider font-semibold mb-3",children:"System Status"}),(0,t.jsxs)("div",{className:"space-y-2 text-xs",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Encryption:"}),(0,t.jsx)("span",{className:"text-accent",children:"âœ“ ACTIVE"})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Firewall:"}),(0,t.jsx)("span",{className:"text-accent",children:"âœ“ ENABLED"})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Threat Detection:"}),(0,t.jsx)("span",{className:"text-accent",children:"âœ“ ONLINE"})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Network Security:"}),(0,t.jsx)("span",{className:"text-green-400",children:"âœ“ SECURE"})]})]})]})]})}let b=(0,n.default)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),v=(0,n.default)("PhoneOff",[["path",{d:"M10.68 13.31a16 16 0 0 0 3.41 2.6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7 2 2 0 0 1 1.72 2v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.42 19.42 0 0 1-3.33-2.67m-2.67-3.34a19.79 19.79 0 0 1-3.07-8.63A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91",key:"z86iuo"}],["line",{x1:"22",x2:"2",y1:"2",y2:"22",key:"11kh81"}]]),j=(0,n.default)("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]),y=(0,n.default)("VideoOff",[["path",{d:"M10.66 6H14a2 2 0 0 1 2 2v2.5l5.248-3.062A.5.5 0 0 1 22 7.87v8.196",key:"w8jjjt"}],["path",{d:"M16 16a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h2",key:"1xawa7"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),N=(0,n.default)("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]),w=(0,n.default)("Share",[["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["polyline",{points:"16 6 12 2 8 6",key:"m901s6"}],["line",{x1:"12",x2:"12",y1:"2",y2:"15",key:"1p0rca"}]]),k=(0,n.default)("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]),S=(0,n.default)("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]),M=(0,n.default)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),C=(0,n.default)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);function E(){let{userContacts:e,user:r}=(0,a.useAuth)(),[n,l]=(0,s.useState)("contacts"),[d,i]=(0,s.useState)(null),[c,o]=(0,s.useState)([]),[m,x]=(0,s.useState)(""),{state:u,startCall:h,endCall:p,toggleAudio:g,toggleVideo:f,startScreenShare:E,stopScreenShare:R,sendMessage:T}=function(e){let t=(0,s.useMemo)(()=>"comm-center",[]),r=(0,s.useRef)(null),a=(0,s.useRef)(null),n=(0,s.useRef)(e),l=(0,s.useRef)(!1),d=(0,s.useRef)([]),i=(0,s.useRef)(null),c=(0,s.useRef)(null),o=(0,s.useRef)(null),m=(0,s.useRef)(null),[x,u]=(0,s.useState)({localStream:null,remoteStream:null,inCall:!1,videoOn:!1,audioOn:!0,screenSharing:!1,messages:[]}),h=(0,s.useCallback)(()=>{c.current?.close(),c.current=null,i.current?.getSenders().forEach(e=>e.track?.stop()),i.current?.close(),i.current=null,o.current?.getTracks().forEach(e=>e.stop()),o.current=null,m.current=null,u(e=>({...e,localStream:null,remoteStream:null,inCall:!1,videoOn:!1,screenSharing:!1}))},[]),p=(0,s.useCallback)(()=>{r.current&&a.current===t||(r.current?.close(),r.current=new BroadcastChannel(t),a.current=t,r.current.onmessage=async e=>{let t=e.data,s=t.roomId;if("idle"===n.current&&(n.current=s),s===n.current)if("offer"===t.type){if(i.current||await g(!1),!i.current)return;for(await i.current.setRemoteDescription(t.sdp),l.current=!0;d.current.length;){let e=d.current.shift();try{await i.current.addIceCandidate(e)}catch{}}let e=await i.current.createAnswer();await i.current.setLocalDescription(e),r.current?.postMessage({type:"answer",sdp:e,roomId:n.current}),u(e=>({...e,inCall:!0}))}else if("answer"===t.type){if(!i.current)return;for(await i.current.setRemoteDescription(t.sdp),l.current=!0;d.current.length;){let e=d.current.shift();try{await i.current.addIceCandidate(e)}catch{}}}else if("candidate"===t.type){if(!i.current)return;if(l.current)try{await i.current.addIceCandidate(t.candidate)}catch{}else d.current.push(t.candidate)}else"end"===t.type&&h()})},[t,h]),g=(0,s.useCallback)(async e=>{let t=new RTCPeerConnection({iceServers:[{urls:["stun:stun.l.google.com:19302","stun:global.stun.twilio.com:3478"]}]});i.current=t,t.onicecandidate=e=>{e.candidate&&r.current?.postMessage({type:"candidate",candidate:e.candidate.toJSON(),roomId:n.current})},t.ontrack=e=>{if(e.streams&&e.streams[0])m.current=e.streams[0],u(t=>({...t,remoteStream:e.streams[0]}));else{let t=m.current??new MediaStream;m.current=t,t.addTrack(e.track),u(e=>({...e,remoteStream:t}))}},t.ondatachannel=e=>{c.current=e.channel,c.current.onmessage=e=>{let t=String(e.data);u(e=>({...e,messages:[...e.messages,{id:`${Date.now()}`,sender:"remote",text:t,timestamp:Date.now()}]}))}},e&&(c.current=t.createDataChannel("chat"),c.current.onmessage=e=>{let t=String(e.data);u(e=>({...e,messages:[...e.messages,{id:`${Date.now()}`,sender:"remote",text:t,timestamp:Date.now()}]}))});let s=await navigator.mediaDevices.getUserMedia({audio:!0,video:!0});return o.current=s,u(e=>({...e,localStream:s,videoOn:!0,audioOn:!0})),s.getTracks().forEach(e=>t.addTrack(e,s)),t},[]),f=(0,s.useCallback)(async()=>{n.current=e,p();let t=await g(!0);u(e=>({...e,inCall:!0}));let s=await t.createOffer();await t.setLocalDescription(s),r.current?.postMessage({type:"offer",sdp:s,roomId:n.current})},[g,p,e]),b=(0,s.useCallback)(()=>{r.current?.postMessage({type:"end",roomId:n.current}),h(),n.current="idle",l.current=!1,d.current=[]},[h]),v=(0,s.useCallback)(()=>{let e=o.current;if(!e)return;let t=!x.audioOn;e.getAudioTracks().forEach(e=>e.enabled=t),u(e=>({...e,audioOn:t}))},[x.audioOn]),j=(0,s.useCallback)(()=>{let e=o.current;if(!e)return;let t=!x.videoOn;e.getVideoTracks().forEach(e=>e.enabled=t),u(e=>({...e,videoOn:t}))},[x.videoOn]),y=(0,s.useCallback)(async()=>{let e=i.current;if(!e)return;let t=(await navigator.mediaDevices.getDisplayMedia({video:!0})).getVideoTracks()[0],s=e.getSenders().find(e=>e.track&&"video"===e.track.kind);s&&s.replaceTrack(t),u(e=>({...e,screenSharing:!0})),t.onended=()=>N()},[]),N=(0,s.useCallback)(()=>{let e=i.current,t=o.current;if(!e||!t)return;let s=t.getVideoTracks()[0],r=e.getSenders().find(e=>e.track&&"video"===e.track.kind);r&&s&&r.replaceTrack(s),u(e=>({...e,screenSharing:!1}))},[]),w=(0,s.useCallback)(e=>{let t=c.current;t&&e.trim()&&(t.send(e),u(t=>({...t,messages:[...t.messages,{id:`${Date.now()}`,sender:"local",text:e,timestamp:Date.now()}]})))},[]);return(0,s.useEffect)(()=>(n.current=e,p(),()=>{r.current?.close(),r.current=null,a.current=null,h()}),[p,h,e]),{state:x,startCall:f,endCall:b,toggleAudio:v,toggleVideo:j,startScreenShare:y,stopScreenShare:N,sendMessage:w}}((0,s.useMemo)(()=>r&&d?[r.email,d.email].sort().join("|"):"idle",[r,d])),A=(0,s.useRef)(null),O=(0,s.useRef)(null);(0,s.useEffect)(()=>{A.current&&u.localStream&&(A.current.srcObject=u.localStream,A.current.muted=!0,A.current.play().catch(()=>{}))},[u.localStream]),(0,s.useEffect)(()=>{O.current&&u.remoteStream&&(O.current.srcObject=u.remoteStream,O.current.play().catch(()=>{}))},[u.remoteStream]);let U=()=>{m.trim()&&(T(m),x(""))};return(0,t.jsxs)("div",{className:"glow-card border rounded-lg p-4 md:p-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-6 pb-4 border-b border-border",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(M,{className:"w-5 h-5 text-primary"}),(0,t.jsx)("h2",{className:"text-lg font-bold text-primary tracking-wider",children:"COMM CENTER"})]}),(0,t.jsxs)("span",{className:"text-xs font-mono text-muted-foreground",children:[e.length," CONTACTS | SECURE"]})]}),(0,t.jsx)("div",{className:"flex gap-2 mb-4 border-b border-border",children:["contacts","chat","call"].map(e=>(0,t.jsx)("button",{onClick:()=>l(e),className:`px-4 py-2 text-xs font-mono font-semibold transition-colors ${n===e?"text-primary border-b-2 border-primary":"text-muted-foreground hover:text-foreground"}`,children:e.toUpperCase()},e))}),"contacts"===n&&(0,t.jsx)("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:0===e.length?(0,t.jsx)("div",{className:"py-8 text-center text-muted-foreground text-sm font-mono",children:"NO CONTACTS AVAILABLE"}):e.map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 bg-secondary/30 border border-border rounded hover:border-primary/50 hover:bg-secondary/50 transition-all group",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 flex-1",children:[(0,t.jsx)("div",{className:"w-8 h-8 rounded border border-primary/30 flex items-center justify-center bg-primary/10 text-xs font-bold text-primary",children:e.avatar}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("div",{className:"text-sm font-mono font-semibold text-foreground",children:e.name}),(0,t.jsxs)("div",{className:"text-xs text-muted-foreground",children:[(0,t.jsx)("span",{className:`inline-block w-2 h-2 rounded-full mr-1 ${"online"===e.status?"bg-accent":"busy"===e.status?"bg-destructive":"bg-muted-foreground"}`}),e.status.toUpperCase()," | ",e.department]}),e.phone&&(0,t.jsxs)("div",{className:"text-xs text-primary mt-1 font-mono",children:[(0,t.jsx)("span",{className:"text-accent",children:"ðŸ“ž"})," ",e.phone]})]})]}),(0,t.jsxs)("div",{className:"flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[(0,t.jsx)("button",{onClick:()=>{i(e),l("call"),h()},className:"p-1.5 bg-primary/20 border border-primary/50 rounded hover:bg-primary/30 text-primary transition-colors",title:"Voice Call",children:(0,t.jsx)(b,{className:"w-3.5 h-3.5"})}),(0,t.jsx)("button",{onClick:()=>{i(e),l("chat")},className:"p-1.5 bg-accent/20 border border-accent/50 rounded hover:bg-accent/30 text-accent transition-colors",title:"Chat",children:(0,t.jsx)(k,{className:"w-3.5 h-3.5"})})]})]},e.id))}),"chat"===n&&(0,t.jsxs)("div",{className:"flex flex-col h-80",children:[d&&(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-4 pb-4 border-b border-border",children:[(0,t.jsx)("div",{className:"w-6 h-6 rounded border border-accent/30 flex items-center justify-center bg-accent/10 text-xs font-bold text-accent",children:d.avatar}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-sm font-mono font-semibold text-foreground",children:d.name}),(0,t.jsx)("div",{className:"text-xs text-muted-foreground",children:"SECURE MESSAGE CHANNEL"})]})]}),(0,t.jsx)("div",{className:"flex-1 space-y-3 overflow-y-auto mb-4 bg-background/50 p-3 rounded border border-border/50",children:u.messages.map(e=>(0,t.jsx)("div",{className:`flex ${"local"===e.sender?"justify-end":"justify-start"}`,children:(0,t.jsxs)("div",{className:`max-w-xs px-3 py-2 rounded text-xs font-mono ${"local"===e.sender?"bg-primary/20 border border-primary/50 text-foreground":"bg-secondary/50 border border-border text-foreground"}`,children:["local"!==e.sender&&(0,t.jsx)("div",{className:"text-primary/80 text-xs mb-1",children:"REMOTE"}),(0,t.jsx)("div",{children:e.text}),(0,t.jsx)("div",{className:"text-muted-foreground text-xs mt-1 text-right",children:new Date(e.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})},e.id))}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("input",{type:"text",value:m,onChange:e=>x(e.target.value),onKeyPress:e=>"Enter"===e.key&&U(),placeholder:"Type message...",className:"flex-1 px-3 py-2 bg-input border border-border rounded text-xs font-mono text-foreground placeholder-muted-foreground focus:outline-none focus:border-primary transition-colors"}),(0,t.jsx)("button",{onClick:U,className:"px-3 py-2 bg-primary/20 border border-primary/50 rounded hover:bg-primary/30 text-primary transition-colors",children:(0,t.jsx)(S,{className:"w-3.5 h-3.5"})})]})]}),"call"===n&&(0,t.jsx)("div",{className:"space-y-4",children:u.inCall&&d?(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"p-4 bg-secondary/50 border border-primary/30 rounded text-center space-y-2",children:[(0,t.jsxs)("div",{className:"flex items-center justify-center gap-2 text-green-400",children:[(0,t.jsx)("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"}),(0,t.jsx)("span",{className:"text-xs font-mono",children:"CALL ACTIVE"})]}),(0,t.jsx)("div",{className:"text-xl font-bold text-primary",children:d.name}),(0,t.jsxs)("div",{className:"flex items-center justify-center gap-2 text-muted-foreground",children:[(0,t.jsx)(C,{className:"w-3 h-3"}),(0,t.jsx)("span",{className:"text-xs font-mono",children:"00:45"})]})]}),u.videoOn&&(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:[(0,t.jsx)("div",{className:"aspect-video bg-black border-2 border-primary/50 rounded overflow-hidden relative",children:(0,t.jsx)("video",{ref:A,className:"w-full h-full object-cover",playsInline:!0})}),u.remoteStream&&(0,t.jsx)("div",{className:"aspect-video bg-black border-2 border-primary/50 rounded overflow-hidden relative",children:(0,t.jsx)("video",{ref:O,className:"w-full h-full object-cover",playsInline:!0})})]}),u.screenSharing&&(0,t.jsxs)("div",{className:"aspect-video bg-black border-2 border-accent/50 rounded flex items-center justify-center overflow-hidden relative",children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-gradient-to-b from-accent/5 to-transparent"}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)(N,{className:"w-8 h-8 text-accent/50 mx-auto mb-2"}),(0,t.jsx)("span",{className:"text-xs text-accent/50 font-mono",children:"SCREEN SHARING"})]})]}),(0,t.jsxs)("div",{className:"flex gap-2 justify-center flex-wrap",children:[(0,t.jsx)("button",{onClick:()=>g(),className:`p-2 rounded border transition-all ${u.audioOn?"bg-primary/20 border-primary text-primary":"bg-destructive/20 border-destructive text-destructive"}`,title:u.audioOn?"Mute":"Unmute",children:(0,t.jsx)(b,{className:"w-4 h-4"})}),(0,t.jsx)("button",{onClick:()=>f(),className:`p-2 rounded border transition-all ${u.videoOn?"bg-primary/20 border-primary text-primary":"bg-secondary border-border text-muted-foreground"}`,title:u.videoOn?"Stop Video":"Start Video",children:u.videoOn?(0,t.jsx)(j,{className:"w-4 h-4"}):(0,t.jsx)(y,{className:"w-4 h-4"})}),(0,t.jsx)("button",{onClick:()=>u.screenSharing?R():E(),className:`p-2 rounded border transition-all ${u.screenSharing?"bg-accent/20 border-accent text-accent":"bg-secondary border-border text-muted-foreground"}`,title:u.screenSharing?"Stop Sharing":"Share Screen",children:u.screenSharing?(0,t.jsx)(w,{className:"w-4 h-4"}):(0,t.jsx)(N,{className:"w-4 h-4"})}),(0,t.jsx)("button",{onClick:()=>{p(),i(null)},className:"p-2 rounded border bg-destructive/20 border-destructive text-destructive hover:bg-destructive/30 transition-all",title:"End Call",children:(0,t.jsx)(v,{className:"w-4 h-4"})})]})]}):(0,t.jsxs)("div",{className:"py-8 text-center space-y-4",children:[(0,t.jsx)(b,{className:"w-12 h-12 text-muted-foreground mx-auto opacity-50"}),(0,t.jsx)("div",{className:"text-sm text-muted-foreground font-mono",children:"NO ACTIVE CALL"}),(0,t.jsx)("div",{className:"text-xs text-muted-foreground",children:"Select a contact to initiate communication"})]})})]})}function R(){let e=(0,r.useRouter)(),{user:n,isLoading:l}=(0,a.useAuth)(),[d,i]=(0,s.useState)(!1),[c,m]=(0,s.useState)({time:new Date().toLocaleTimeString(),cpu:35,gpu:22,memory:42,ram:58,temp:62,networkUp:245,networkDown:512,coordinates:{lat:0,lon:0}});return(0,s.useEffect)(()=>{l||n||e.push("/login")},[n,l,e]),(0,s.useEffect)(()=>{let e=setInterval(()=>{m(e=>({...e,time:new Date().toLocaleTimeString()}))},1e3);navigator.geolocation&&navigator.geolocation.getCurrentPosition(e=>{m(t=>({...t,coordinates:{lat:e.coords.latitude,lon:e.coords.longitude}}))},()=>{m(e=>({...e,coordinates:{lat:40.7128,lon:-74.006}}))});let t=setInterval(()=>{m(e=>{let t=(Math.random()-.5)*3,s=Math.max(20,Math.min(80,e.cpu+t)),r=(Math.random()-.5)*2.5,a=Math.max(15,Math.min(70,e.gpu+r)),n=(Math.random()-.5)*1.5,l=Math.max(45,Math.min(75,e.ram+n)),d=(Math.random()-.5)*2,i=Math.max(30,Math.min(70,e.memory+d)),c=(Math.random()-.5)*1,o=Math.max(58,Math.min(82,e.temp+c)),m=(Math.random()-.5)*50,x=Math.max(150,Math.min(450,e.networkUp+m)),u=(Math.random()-.5)*100,h=Math.max(300,Math.min(750,e.networkDown+u));return{...e,cpu:Math.round(10*s)/10,gpu:Math.round(10*a)/10,ram:Math.round(10*l)/10,memory:Math.round(10*i)/10,temp:Math.round(10*o)/10,networkUp:Math.round(x),networkDown:Math.round(h)}})},3e3);return()=>{clearInterval(e),clearInterval(t)}},[]),(0,t.jsxs)("div",{className:"min-h-screen bg-background text-foreground",children:[(0,t.jsx)("div",{className:"fixed inset-0 opacity-3 pointer-events-none",children:(0,t.jsx)("div",{style:{backgroundImage:"linear-gradient(0deg, rgba(0, 217, 255, 0.03) 1px, transparent 1px), linear-gradient(90deg, rgba(0, 217, 255, 0.03) 1px, transparent 1px)",backgroundSize:"60px 60px"},className:"absolute inset-0"})}),(0,t.jsx)(o,{isListening:d,setIsListening:i}),(0,t.jsx)("main",{className:"relative z-10",children:(0,t.jsxs)("div",{className:"p-4 lg:p-6 max-w-7xl mx-auto",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3 mb-6",children:[(0,t.jsx)(x,{label:"CPU USAGE",value:c.cpu,unit:"%",status:"active",color:"cyan"}),(0,t.jsx)(x,{label:"GPU USAGE",value:c.gpu,unit:"%",status:"active",color:"green"}),(0,t.jsx)(x,{label:"MEMORY",value:c.memory,unit:"%",status:"active",color:"blue"}),(0,t.jsx)(x,{label:"SYSTEM TEMP",value:c.temp,unit:"Â°C",status:c.temp>75?"warning":"active",color:"orange"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 mb-6",children:[(0,t.jsx)("div",{className:"lg:col-span-2",children:(0,t.jsx)(u,{systemData:c})}),(0,t.jsx)("div",{className:"space-y-4",children:(0,t.jsx)(f,{systemData:c})})]}),(0,t.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 mb-6",children:(0,t.jsx)(h,{systemData:c})}),(0,t.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 mb-6",children:(0,t.jsx)(E,{})}),(0,t.jsx)(g,{isListening:d,systemData:c})]})})]})}e.s(["default",()=>R],31713)}]);